# Custom Zones (Drop Zones) 사용 가이드

## 🎯 Custom Zones란?

Windows의 FancyZones처럼 화면을 원하는 영역으로 나누고, Shift 키를 누른 채로 드래그하면 윈도우가 해당 영역에 스냅되는 기능입니다.

---

## 📋 사용 방법 (3단계)

### Step 1: Custom Layouts 메뉴 추가

현재 코드에는 `openCustomLayouts` 메서드가 구현되어 있습니다.

**Main.storyboard에서 메뉴 추가:**

1. Xcode에서 `Main.storyboard` 열기
2. **Application Scene** → **Rectangle** → **메뉴 찾기**
3. 적절한 위치에 메뉴 아이템 추가:
   - "Preferences..." 아래
   - "About ZoneSnap" 위

4. 새 메뉴 아이템 설정:
   ```
   Title: Custom Layouts...
   Key Equivalent: ⌘L (선택사항)
   Action: openCustomLayouts:
   Target: First Responder
   ```

### Step 2: 레이아웃 생성

1. **앱 실행**
   ```bash
   ⌘R
   ```

2. **메뉴바에서 "Custom Layouts..." 클릭**

3. **"Create New Layout" 버튼 클릭**

4. **Zone 추가**:
   - **"Add Zone"** 버튼 클릭
   - 또는 **"Grid Template"** 선택 (2x2, 3x3 등)

5. **Zone 편집**:
   - **드래그**: 클릭 & 드래그로 위치 이동
   - **리사이즈**: 모서리/가장자리 핸들 드래그
   - **이름**: 오른쪽 패널에서 Zone 이름 변경
   - **삭제**: 선택 후 "Delete Selected Zone"

6. **저장**:
   - Layout Name 입력
   - "Save" 버튼 클릭

### Step 3: 레이아웃 활성화 & 사용

1. **레이아웃 목록에서 "Activate" 버튼 클릭**
   - 각 모니터마다 하나의 레이아웃만 활성화 가능

2. **윈도우 드래그 + Shift 키**:
   ```
   1. 아무 윈도우나 드래그 시작
   2. ⇧ Shift 키 누르기
   3. 커스텀 존들이 하이라이트로 표시됨
   4. 원하는 존 위로 커서 이동
   5. 마우스 릴리즈
   → 윈도우가 해당 존에 스냅!
   ```

---

## ⌨️ 단축키

### 기본 키

| 키 | 기능 |
|---|---|
| **⇧ Shift + Drag** | 커스텀 존에 스냅 |
| **Drag (Shift 없이)** | 기존 Rectangle 스냅 (화면 가장자리) |

### 앱 메뉴

| 메뉴 | 설명 |
|---|---|
| `⌘L` Custom Layouts... | 레이아웃 관리 창 열기 (설정 시) |
| `⌘,` Preferences... | 환경설정 |

---

## 🎨 레이아웃 템플릿 예시

### 1. Two Columns (2열)
```
┌──────────┬──────────┐
│          │          │
│   Left   │  Right   │
│   50%    │   50%    │
│          │          │
└──────────┴──────────┘
```

**사용 예**: 브라우저 + 코드 에디터

### 2. Three Columns (3열)
```
┌─────┬─────┬─────┐
│     │     │     │
│  L  │  C  │  R  │
│ 33% │ 34% │ 33% │
│     │     │     │
└─────┴─────┴─────┘
```

**사용 예**: 문서 + 에디터 + 터미널

### 3. Grid 2×2 (4등분)
```
┌──────────┬──────────┐
│    1     │    2     │
│   50%    │   50%    │
├──────────┼──────────┤
│    3     │    4     │
│   50%    │   50%    │
└──────────┴──────────┘
```

**사용 예**: 멀티태스킹 (문서, 웹, 메모, 터미널)

### 4. Coding Layout (코딩 레이아웃)
```
┌───────────────┬──────┐
│               │  T   │
│               │ 30%  │
│   Editor      ├──────┤
│    60%        │      │
│               │  B   │
│               │ 30%  │
└───────────────┴──────┘
```

**사용 예**: 에디터 + 문서 + 터미널

### 5. Ultra-wide Monitor (울트라와이드)
```
┌─────┬──────────┬─────┐
│  L  │          │  R  │
│ 25% │  Center  │ 25% │
│     │   50%    │     │
└─────┴──────────┴─────┘
```

**사용 예**: 사이드바 + 메인 작업 + 참조

---

## 🔧 고급 설정

### Gap (창 사이 간격) 설정

레이아웃 생성/편집 시:
```
Gap Size: 10px (추천)
```

- 0px: 창들이 완전히 붙음
- 10px: 적당한 여백 (추천)
- 20px: 넓은 여백

### 여러 모니터 사용 시

1. **Screen 선택**:
   - Layout Manager에서 "Screen" 드롭다운 선택
   - "Screen 1", "Screen 2" 등으로 표시

2. **모니터별 레이아웃**:
   - 각 모니터마다 다른 레이아웃 활성화 가능
   - 예: 메인 모니터는 3열, 서브 모니터는 2x2 그리드

3. **해상도 독립적**:
   - 정규화 좌표 (0.0 ~ 1.0) 사용
   - 해상도가 바뀌어도 비율 유지

---

## 🐛 문제 해결

### Shift 눌러도 존이 안 보여요

**원인 1**: 레이아웃이 활성화되지 않음
```
✅ 해결: Layout Manager에서 "Activate" 버튼 클릭
```

**원인 2**: 레이아웃에 Zone이 없음
```
✅ 해결: 레이아웃 편집 → "Add Zone" 또는 "Grid Template" 사용
```

**원인 3**: 다른 모니터의 레이아웃 활성화됨
```
✅ 해결: 현재 모니터에 맞는 레이아웃 활성화 확인
```

**원인 4**: Accessibility 권한 없음
```
✅ 해결:
   System Preferences → Security & Privacy → Privacy
   → Accessibility → ZoneSnap 체크
```

### 존 표시는 되는데 스냅이 안 돼요

**원인 1**: Shift 키를 너무 일찍 뗌
```
✅ 해결: 마우스 릴리즈 전까지 Shift 키 유지
```

**원인 2**: 윈도우가 스냅 불가능
```
✅ 해결: 일부 앱(시스템 환경설정 등)은 스냅 불가
```

### 레이아웃을 만들었는데 목록에 안 나와요

**원인**: 저장하지 않음
```
✅ 해결:
   1. "Save" 버튼 클릭 확인
   2. Layout Name 입력 확인
   3. 창 닫기 전 저장 필수
```

### Zone 위치가 이상해요

**원인**: 정규화 좌표 범위 초과
```
✅ 해결:
   - X, Y, Width, Height 모두 0.0 ~ 1.0 범위
   - 에디터에서 자동으로 제한되지만, 직접 편집 시 주의
```

---

## 💡 팁 & 트릭

### 1. 빠른 Zone 생성

**Grid Template 사용:**
```
2x2 Grid → 4개 존 자동 생성
3x3 Grid → 9개 존 자동 생성
4x4 Grid → 16개 존 자동 생성
```

### 2. Zone 복제

Zone 선택 → Duplicate → 드래그로 이동

### 3. 정밀 조정

Zone 선택 → 오른쪽 패널에서 숫자 직접 입력
- X: 0.00 ~ 1.00 (화면 왼쪽부터)
- Y: 0.00 ~ 1.00 (화면 아래부터)
- Width: 0.01 ~ 1.00 (최소 1%)
- Height: 0.01 ~ 1.00 (최소 1%)

### 4. 자주 쓰는 레이아웃

여러 레이아웃 만들어두고:
- "Work" - 업무용
- "Code" - 코딩용
- "Media" - 미디어용

필요할 때마다 Activate 전환

### 5. 모니터 프로필

외부 모니터 연결/해제 시:
- 각 모니터별 레이아웃 자동 유지
- 해상도 변경해도 비율 유지

---

## 🎬 사용 시나리오

### 시나리오 1: 코딩 작업

**레이아웃**: Coding Setup
```
1. VS Code → 왼쪽 큰 영역 (60%)
2. 문서/참조 → 오른쪽 위 (30%)
3. 터미널 → 오른쪽 아래 (30%)
```

**작업 순서**:
```
1. VS Code 드래그 + Shift → 왼쪽 존
2. 크롬 드래그 + Shift → 오른쪽 위 존
3. 터미널 드래그 + Shift → 오른쪽 아래 존
```

### 시나리오 2: 문서 작업

**레이아웃**: Three Columns
```
1. PDF (참조) → 왼쪽 33%
2. Word (작성) → 중앙 34%
3. Notes (메모) → 오른쪽 33%
```

### 시나리오 3: 멀티미디어

**레이아웃**: Grid 2x2
```
1. YouTube → 왼쪽 위
2. Spotify → 오른쪽 위
3. Discord → 왼쪽 아래
4. Browser → 오른쪽 아래
```

---

## 🆚 기존 Rectangle vs Custom Zones

| 기능 | 기존 Rectangle | Custom Zones |
|---|---|---|
| **트리거** | 드래그 (화면 가장자리) | Shift + 드래그 (어디서나) |
| **영역** | 고정 (좌/우/위/아래 등) | 자유 (원하는 대로) |
| **개수** | 제한적 (~10개) | 무제한 |
| **편집** | 불가 | 가능 (위치, 크기, 이름) |
| **모니터** | 모니터별 동일 | 모니터별 다른 레이아웃 |
| **저장** | 불가 | 여러 레이아웃 저장 |

**추천 사용법**:
- **빠른 작업**: 기존 Rectangle (화면 가장자리)
- **정밀 작업**: Custom Zones (Shift + 드래그)

---

## 📱 메뉴 통합 (Xcode에서)

### Main.storyboard 편집

1. **Xcode** → `Main.storyboard` 열기
2. **Rectangle** → **메뉴** 찾기
3. **"Preferences..." 아래**에 새 메뉴 추가
4. **Attributes Inspector**:
   - Title: `Custom Layouts...`
   - Key Equivalent: `⌘L` (선택)
   - Action: `openCustomLayouts:`
   - Target: `First Responder`

5. **저장** 후 빌드

---

## 🚀 빠른 시작 체크리스트

### 첫 사용자
- [ ] Xcode에서 Main.storyboard에 메뉴 추가
- [ ] 앱 빌드 & 실행 (⌘R)
- [ ] "Custom Layouts..." 메뉴 클릭
- [ ] "Create New Layout" 클릭
- [ ] "Grid Template" → "2x2 Grid" 선택
- [ ] Layout Name: "My First Layout" 입력
- [ ] "Save" 클릭
- [ ] "Activate" 버튼 클릭
- [ ] 아무 윈도우나 **Shift + 드래그**
- [ ] 존이 하이라이트 되는지 확인
- [ ] 마우스 릴리즈하여 스냅 확인

### 고급 사용자
- [ ] 여러 레이아웃 생성 (업무, 코딩, 미디어 등)
- [ ] 각 모니터별 레이아웃 설정
- [ ] Gap 크기 조정 (10px 추천)
- [ ] 자주 쓰는 레이아웃 즐겨찾기
- [ ] Zone 이름 지정 (Editor, Terminal 등)

---

## 🔑 핵심 포인트

1. **Shift 키**: 커스텀 존 스냅의 트리거
2. **Activate**: 레이아웃을 꼭 활성화해야 함
3. **정규화 좌표**: 해상도 독립적 (0.0 ~ 1.0)
4. **모니터별 설정**: 각 모니터마다 다른 레이아웃 가능
5. **기존 기능 유지**: Shift 없이 드래그하면 Rectangle 기본 기능

---

**작성일**: 2026-01-02
**버전**: 1.0.0
**앱**: ZoneSnap (Rectangle + Custom Layouts)
